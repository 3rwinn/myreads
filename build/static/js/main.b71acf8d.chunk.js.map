{"version":3,"sources":["BooksAPI.js","components/Book.js","ListBooks.js","SearchBook.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Accept","Authorization","update","book","shelf","fetch","concat","id","method","Object","objectSpread","Content-Type","body","JSON","stringify","then","res","json","search","query","data","books","Book","_ref","b","img","changeShelf","title","authors","react_default","a","createElement","className","style","width","height","backgroundImage","value","onChange","e","defaultValue","disabled","ListBooks","_this$props","this","props","filter","map","components_Book","key","imageLinks","thumbnail","join","Link","to","Component","SearchBook","content","searchResult","searchBook","undefined","type","target","placeholder","BooksApp","state","_callee","results","regenerator_default","wrap","_context","prev","next","BooksAPI","sent","hasOwnProperty","_this","setState","stop","newbooks","newShelf","push","_this2","_this3","_this$state","BrowserRouter","Route","exact","path","render","src_ListBooks","src_SearchBook","React","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.b71acf8d.chunk.js","sourcesContent":["\r\nconst api = \"https://reactnd-books-api.udacity.com\"\r\n\r\n\r\n// Generate a unique token for storing your bookshelf data on the backend server.\r\nlet token = localStorage.token\r\nif (!token)\r\n  token = localStorage.token = Math.random().toString(36).substr(-8)\r\n\r\nconst headers = {\r\n  'Accept': 'application/json',\r\n  'Authorization': token\r\n}\r\n\r\nexport const get = (bookId) =>\r\n  fetch(`${api}/books/${bookId}`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.book)\r\n\r\nexport const getAll = () =>\r\n  fetch(`${api}/books`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.books)\r\n\r\nexport const update = (book, shelf) =>\r\n  fetch(`${api}/books/${book.id}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ shelf })\r\n  }).then(res => res.json())\r\n\r\nexport const search = (query) =>\r\n  fetch(`${api}/search`, {\r\n    method: 'POST',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ query })\r\n  }).then(res => res.json())\r\n    .then(data => data.books)\r\n","import React from \"react\";\r\n\r\nconst Book = ({ b, img, shelf, changeShelf, title, authors }) => {\r\n  return (\r\n    <li>\r\n      <div className=\"book\">\r\n        <div className=\"book-top\">\r\n          <div\r\n            className=\"book-cover\"\r\n            style={{\r\n              width: 128,\r\n              height: 193,\r\n              backgroundImage: `url(${img})`\r\n            }}\r\n          />\r\n          <div className=\"book-shelf-changer\">\r\n            <select\r\n              value={shelf}\r\n              onChange={e => changeShelf(b, e)}\r\n              defaultValue=\"move\"\r\n            >\r\n              <option value=\"move\" disabled>\r\n                Move to...\r\n              </option>\r\n              <option value=\"currentlyReading\">Currently Reading</option>\r\n              <option value=\"wantToRead\">Want to Read</option>\r\n              <option value=\"read\">Read</option>\r\n              <option value=\"none\">None</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"book-title\">{title}</div>\r\n        <div className=\"book-authors\">{authors}</div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\nexport default Book;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Book from \"./components/Book\";\r\n\r\nclass ListBooks extends Component {\r\n  render() {\r\n    const { books, changeShelf } = this.props;\r\n    return (\r\n      <div>\r\n        <div className=\"list-books\">\r\n          <div className=\"list-books-title\">\r\n            <h1>MyReads</h1>\r\n          </div>\r\n          <div className=\"list-books-content\">\r\n            <div>\r\n              <div className=\"bookshelf\">\r\n                <h2 className=\"bookshelf-title\">Currently Reading</h2>\r\n                <div className=\"bookshelf-books\">\r\n                  <ol className=\"books-grid\">\r\n                    {books\r\n                      .filter(book => book.shelf === \"currentlyReading\")\r\n                      .map(b => (\r\n                        <Book\r\n                          b={b}\r\n                          key={b.id}\r\n                          img={b.imageLinks && b.imageLinks.thumbnail}\r\n                          shelf={b.shelf}\r\n                          changeShelf={changeShelf}\r\n                          title={b.title}\r\n                          authors={b.authors && b.authors.join(\", \")}\r\n                        />\r\n                      ))}\r\n                  </ol>\r\n                </div>\r\n              </div>\r\n              <div className=\"bookshelf\">\r\n                <h2 className=\"bookshelf-title\">Want to Read</h2>\r\n                <div className=\"bookshelf-books\">\r\n                  <ol className=\"books-grid\">\r\n                    {books\r\n                      .filter(book => book.shelf === \"wantToRead\")\r\n                      .map(b => (\r\n                        <Book\r\n                          b={b}\r\n                          key={b.id}\r\n                          img={b.imageLinks && b.imageLinks.thumbnail}\r\n                          shelf={b.shelf}\r\n                          changeShelf={changeShelf}\r\n                          title={b.title}\r\n                          authors={b.authors && b.authors.join(\", \")}\r\n                        />\r\n                      ))}\r\n                  </ol>\r\n                </div>\r\n              </div>\r\n              <div className=\"bookshelf\">\r\n                <h2 className=\"bookshelf-title\">Read</h2>\r\n                <div className=\"bookshelf-books\">\r\n                  <ol className=\"books-grid\">\r\n                    {books\r\n                      .filter(book => book.shelf === \"read\")\r\n                      .map(b => (\r\n                        <Book\r\n                          b={b}\r\n                          key={b.id}\r\n                          img={b.imageLinks && b.imageLinks.thumbnail}\r\n                          shelf={b.shelf}\r\n                          changeShelf={changeShelf}\r\n                          title={b.title}\r\n                          authors={b.authors && b.authors.join(\", \")}\r\n                        />\r\n                      ))}\r\n                  </ol>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"open-search\">\r\n            <Link to=\"/search\" className=\"button\">\r\n              Add a book\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default ListBooks;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Book from \"./components/Book\";\r\n\r\nclass SearchBook extends Component {\r\n  render() {\r\n    const { searchResult, searchBook, changeShelf } = this.props;\r\n    let content;\r\n    if (searchResult === undefined) {\r\n      content = <div>We coudn't find books you are looking for</div>;\r\n    } else {\r\n      content = searchResult.map(b => (\r\n        <Book\r\n          b={b}\r\n          key={b.id}\r\n          img={b.imageLinks && b.imageLinks.thumbnail}\r\n          shelf={b.shelf}\r\n          changeShelf={changeShelf}\r\n          title={b.title}\r\n          authors={b.authors && b.authors.join(\", \")}\r\n        />\r\n      ));\r\n    }\r\n\r\n    return (\r\n      <div className=\"search-books\">\r\n        <div className=\"search-books-bar\">\r\n          <Link to=\"/\" className=\"close-search\">\r\n            Close\r\n          </Link>\r\n          <div className=\"search-books-input-wrapper\">\r\n            <input\r\n              type=\"text\"\r\n              onChange={e => searchBook(e.target.value)}\r\n              placeholder=\"Search by title or author\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"search-books-results\">\r\n          <ol className=\"books-grid\">{content}</ol>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default SearchBook;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport * as BooksAPI from \"./BooksAPI\";\r\nimport \"./App.css\";\r\nimport ListBooks from \"./ListBooks\";\r\nimport SearchBook from \"./SearchBook\";\r\n\r\nclass BooksApp extends React.Component {\r\n  state = {\r\n    books: [],\r\n    searchResult: []\r\n  };\r\n  componentDidMount() {\r\n    BooksAPI.getAll().then(books => this.setState(() => ({ books })));\r\n  }\r\n  searchBook = async query => {\r\n    const results = await BooksAPI.search(query).then(results => results);\r\n\r\n    if (results !== undefined && !results.hasOwnProperty(\"error\")) {\r\n      this.setState({ searchResult: results });\r\n    } else if (\r\n      query === \"\" ||\r\n      results === undefined ||\r\n      results.hasOwnProperty(\"error\")\r\n    ) {\r\n      this.setState({ searchResult: undefined });\r\n    }\r\n  };\r\n  changeShelf = (book, e) => {\r\n    // Remove the current book from the state and store it into a new variable\r\n    const newbooks = this.state.books.filter(b => b.id !== book.id);\r\n    // Retrieve shelf value from the event\r\n    const newShelf = e.target.value;\r\n    // Replace the current book shelf with newShelf\r\n    book.shelf = newShelf;\r\n    // Insert the edited book in newbooks array\r\n    newbooks.push(book);\r\n    // Update the state with the newbooks array\r\n    this.setState({ books: newbooks });\r\n    // Update the current book in the API\r\n    BooksAPI.update(book, newShelf);\r\n  };\r\n\r\n  render() {\r\n    const { books, searchResult } = this.state;\r\n    return (\r\n      <Router>\r\n        <div className=\"app\">\r\n          <Route\r\n            exact\r\n            path=\"/\"\r\n            render={() => (\r\n              <ListBooks books={books} changeShelf={this.changeShelf} />\r\n            )}\r\n          />\r\n          <Route\r\n            path=\"/search\"\r\n            render={() => (\r\n              <SearchBook\r\n                searchBook={this.searchBook}\r\n                searchResult={searchResult}\r\n                changeShelf={this.changeShelf}\r\n              />\r\n            )}\r\n          />\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BooksApp;\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}